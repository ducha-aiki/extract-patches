---

title: laf


keywords: fastai
sidebar: home_sidebar

summary: "This module contains helper functions to convert between ddifferent formats of local keypoints: OpenCV, ellipse, affine"
description: "This module contains helper functions to convert between ddifferent formats of local keypoints: OpenCV, ellipse, affine"
nb_path: "nbs/laf.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/laf.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="convert_LAFs" class="doc_header"><code>convert_LAFs</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>convert_LAFs</code>(<strong><code>kps</code></strong>:<code>List</code>[<code>T</code>], <strong><code>PS</code></strong>:<code>int</code>, <strong><code>mag_factor</code></strong>:<code>float</code>)</p>
</blockquote>
<p>Converts n x [ a11 a12 x; a21 a22 y] affine regions
into transformation matrix
and pyramid index to extract from for the patch extraction</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Ell2LAF" class="doc_header"><code>Ell2LAF</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Ell2LAF</code>(<strong><code>ell</code></strong>:<code>Union</code>[<code>List</code>[<code>T</code>], <code>array</code>])</p>
</blockquote>
<p>Converts ellipse [x y a b c] into [ a11 a12 x; a21 a22 y] affine region</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="invSqrt" class="doc_header"><code>invSqrt</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L54" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>invSqrt</code>(<strong><code>a</code></strong>, <strong><code>b</code></strong>, <strong><code>c</code></strong>)</p>
</blockquote>
<p>Returns elements of the inverted square root of symmetrical matrix [[a, b], [b, c]]</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="rectifyAffineTransformationUpIsUp" class="doc_header"><code>rectifyAffineTransformationUpIsUp</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L81" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>rectifyAffineTransformationUpIsUp</code>(<strong><code>A</code></strong>:<code>array</code>)</p>
</blockquote>
<p>Sets [ a11 a12; a21 a22] into upright orientation</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="convert_ellipse_keypoints" class="doc_header"><code>convert_ellipse_keypoints</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L94" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>convert_ellipse_keypoints</code>(<strong><code>ells</code></strong>:<code>Union</code>[<code>List</code>[<code>T</code>], <code>array</code>], <strong><code>PS</code></strong>:<code>int</code>, <strong><code>mag_factor</code></strong>:<code>float</code>)</p>
</blockquote>
<p>Converts n x [ x y a b c] affine regions
into transformation matrix
and pyramid index to extract from for the patch extraction</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ells2LAFs" class="doc_header"><code>ells2LAFs</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L120" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ells2LAFs</code>(<strong><code>ells</code></strong>:<code>Union</code>[<code>List</code>[<code>T</code>], <code>array</code>])</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="LAF2pts" class="doc_header"><code>LAF2pts</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L127" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>LAF2pts</code>(<strong><code>LAF</code></strong>:<code>array</code>, <strong><code>n_pts</code></strong>:<code>int</code>=<em><code>50</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="convertLAFs_to_A23format" class="doc_header"><code>convertLAFs_to_A23format</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L143" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>convertLAFs_to_A23format</code>(<strong><code>LAFs</code></strong>:<code>array</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="LAFs2ell" class="doc_header"><code>LAFs2ell</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L168" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>LAFs2ell</code>(<strong><code>in_LAFs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="visualize_LAFs" class="doc_header"><code>visualize_LAFs</code><a href="https://github.com/ducha-aiki/extract_patches/tree/master/extract_patches/laf.py#L185" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>visualize_LAFs</code>(<strong><code>img</code></strong>:<code>array</code>, <strong><code>LAFs</code></strong>:<code>array</code>, <strong><code>color</code></strong>:<code>str</code>=<em><code>'r'</code></em>)</p>
</blockquote>
<p>Plots local features on the image with matplotlib</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

